<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype: Spatial Canvas v2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-hover:hover { transform: translateY(-3px); box-shadow: 0 20px 40px -12px rgba(0,0,0,0.2); }
        [data-expand] { max-height: 0; overflow: hidden; transition: max-height 0.4s ease, opacity 0.3s ease; opacity: 0; }
        [data-expand].open { max-height: 500px; opacity: 1; }
        .chevron { transition: transform 0.3s ease; }
        .chevron.rotated { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen p-8">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [expanded, setExpanded] = useState({});
            const toggle = (id) => setExpanded(prev => ({ ...prev, [id]: !prev[id] }));

            return (
                <div className="max-w-5xl mx-auto space-y-6">
                    <p className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2">Spatial Canvas v2 — Option B + CTAs + "What This Means"</p>

                    <div className="bg-gradient-to-br from-slate-50 to-slate-100 rounded-3xl p-8 border border-slate-200">
                        <h2 className="text-lg font-bold flex items-center gap-2 mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>
                            Key Insights & Decisions
                        </h2>

                        <div className="grid grid-cols-2 gap-6">
                            {/* Trial Match */}
                            <div className="bg-slate-900 rounded-3xl p-6 text-white shadow-xl card-hover">
                                <p className="text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-2">Clinical Trial Match</p>
                                <h3 className="font-bold text-lg mb-2">Phase I/II AAV9-CLN3 Gene Therapy</h3>
                                <p className="text-xs text-slate-300 leading-relaxed mb-3">Weill Cornell. Your child meets 8 of 9 eligibility criteria.</p>
                                <div className="flex items-center gap-3 mb-5">
                                    <div className="flex-1 bg-white/10 h-2 rounded-full"><div className="bg-indigo-500 h-full w-[89%] rounded-full"></div></div>
                                    <span className="text-xs font-bold text-indigo-400">89%</span>
                                </div>

                                {/* What This Means */}
                                <button onClick={() => toggle('trial')} className="flex items-center gap-1.5 text-indigo-300 text-[11px] font-bold mb-3 hover:text-indigo-200 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                                    What this means for your family
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`chevron ${expanded.trial ? 'rotated' : ''}`}><path d="m6 9 6 6 6-6"/></svg>
                                </button>
                                <div data-expand className={expanded.trial ? 'open' : ''}>
                                    <div className="bg-white/10 rounded-2xl p-4 mb-4 border border-white/10">
                                        <p className="text-sm text-slate-200 leading-relaxed mb-2">This is an <strong className="text-white">experimental treatment</strong> being tested for the first time in children with CLN3. Doctors insert a corrected copy of the CLN3 gene using a harmless virus.</p>
                                        <div className="space-y-2 mt-3">
                                            <div className="flex items-start gap-2">
                                                <span className="text-emerald-400 mt-0.5">&#10003;</span>
                                                <p className="text-xs text-slate-300"><strong className="text-slate-100">If you proceed:</strong> We'll help you contact the trial team and start a pre-screening conversation. No commitment yet.</p>
                                            </div>
                                            <div className="flex items-start gap-2">
                                                <span className="text-slate-500 mt-0.5">&#8987;</span>
                                                <p className="text-xs text-slate-300"><strong className="text-slate-100">Timeline:</strong> Pre-screening takes 2-4 weeks. Enrollment decisions are made by the trial team, not us.</p>
                                            </div>
                                            <div className="flex items-start gap-2">
                                                <span className="text-amber-400 mt-0.5">&#9888;</span>
                                                <p className="text-xs text-slate-300"><strong className="text-slate-100">Important:</strong> This is Phase I/II — safety is still being evaluated. Your care team should be part of this conversation.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex gap-3">
                                    <button className="bg-white text-slate-900 px-4 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wide shadow-md">Pre-Screen Now</button>
                                    <button className="text-indigo-300 px-4 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-wide hover:text-white transition-colors">View Full Details</button>
                                </div>
                            </div>

                            {/* Repurposing */}
                            <div className="bg-white rounded-3xl p-6 shadow-xl border border-indigo-200 card-hover">
                                <span className="bg-indigo-600 text-white text-[9px] font-black px-2.5 py-0.5 rounded-md uppercase">Breakthrough</span>
                                <h3 className="font-bold text-indigo-900 text-lg mt-3 mb-2">Drug Repurposing: Tamoxifen</h3>
                                <p className="text-sm text-slate-600 leading-relaxed mb-4">Tamoxifen activates the TRPML1 lysosomal channel that CLN3 patients are missing. FDA-approved with pediatric safety data.</p>

                                {/* What This Means */}
                                <button onClick={() => toggle('repurpose')} className="flex items-center gap-1.5 text-indigo-500 text-[11px] font-bold mb-3 hover:text-indigo-700 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                                    What this means for your family
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`chevron ${expanded.repurpose ? 'rotated' : ''}`}><path d="m6 9 6 6 6-6"/></svg>
                                </button>
                                <div data-expand className={expanded.repurpose ? 'open' : ''}>
                                    <div className="bg-indigo-50 rounded-2xl p-4 mb-4 border border-indigo-100">
                                        <p className="text-sm text-slate-700 leading-relaxed mb-2">Tamoxifen is a <strong>well-known, safe medication</strong> already approved by the FDA for other conditions. Researchers found it may also help with the specific protein problem in CLN3.</p>
                                        <div className="space-y-2 mt-3">
                                            <div className="flex items-start gap-2">
                                                <span className="text-emerald-600 mt-0.5">&#10003;</span>
                                                <p className="text-xs text-slate-600"><strong className="text-slate-800">If you proceed:</strong> We'll generate a briefing document your neurologist can review. They would decide if it's appropriate for your child.</p>
                                            </div>
                                            <div className="flex items-start gap-2">
                                                <span className="text-slate-400 mt-0.5">&#8987;</span>
                                                <p className="text-xs text-slate-600"><strong className="text-slate-800">Timeline:</strong> This could move fast — weeks, not months. It's a conversation with your existing doctor, not a new trial.</p>
                                            </div>
                                            <div className="flex items-start gap-2">
                                                <span className="text-amber-500 mt-0.5">&#9888;</span>
                                                <p className="text-xs text-slate-600"><strong className="text-slate-800">Important:</strong> This is "off-label" use — it's legal and common, but not specifically tested for CLN3 in clinical trials yet.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex gap-3">
                                    <button className="bg-indigo-600 text-white px-4 py-2.5 rounded-xl text-xs font-bold shadow-md hover:bg-indigo-700 transition-colors">Generate Specialist Briefing</button>
                                    <button className="text-indigo-600 px-4 py-2.5 rounded-xl text-xs font-bold border border-indigo-200 hover:bg-indigo-50 transition-colors">See Agent Reasoning</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
